MAIN
	MOVE TEMP 0 
	BEGIN
		MOVE TEMP 1 
		BEGIN
			RETURN CALL Create_BBS()
		END
		HLOAD TEMP 2 TEMP 1 0
		HLOAD TEMP 3 TEMP 2 4
		MOVE TEMP 4 10
		RETURN CALL TEMP 3( TEMP 1 TEMP 4 )
	END
	PRINT TEMP 0
END

Create_BBS [0]
BEGIN
	MOVE TEMP 0 HALLOCATE 16
	HSTORE TEMP 0 0 BBS_Sort
	HSTORE TEMP 0 4 BBS_Start
	HSTORE TEMP 0 8 BBS_Init
	HSTORE TEMP 0 12 BBS_Print

	MOVE TEMP 1 HALLOCATE 12
	HSTORE TEMP 1 0 TEMP 0

	MOVE TEMP 2 HALLOCATE 4
	MOVE TEMP 2 0
	HSTORE TEMP 1 4 TEMP 2
	MOVE TEMP 3 HALLOCATE 4
	MOVE TEMP 3 0
	HSTORE TEMP 1 8 TEMP 3

	RETURN TEMP 1
END

BBS_Start [2]
BEGIN
	MOVE TEMP 3 
	BEGIN
		MOVE TEMP 4 TEMP 0
		HLOAD TEMP 5 TEMP 4 0
		HLOAD TEMP 6 TEMP 5 8
		MOVE TEMP 7 TEMP 1
		RETURN CALL TEMP 6( TEMP 4 TEMP 7 )
	END
	MOVE TEMP 2 TEMP 3
	MOVE TEMP 8 
	BEGIN
		MOVE TEMP 9 TEMP 0
		HLOAD TEMP 10 TEMP 9 0
		HLOAD TEMP 11 TEMP 10 12

		RETURN CALL TEMP 11( TEMP 9 )
	END
	MOVE TEMP 2 TEMP 8
	MOVE TEMP 12 99999
	PRINT TEMP 12
	MOVE TEMP 13 
	BEGIN
		MOVE TEMP 14 TEMP 0
		HLOAD TEMP 15 TEMP 14 0
		HLOAD TEMP 16 TEMP 15 0

		RETURN CALL TEMP 16( TEMP 14 )
	END
	MOVE TEMP 2 TEMP 13
	MOVE TEMP 17 
	BEGIN
		MOVE TEMP 18 TEMP 0
		HLOAD TEMP 19 TEMP 18 0
		HLOAD TEMP 20 TEMP 19 12

		RETURN CALL TEMP 20( TEMP 18 )
	END
	MOVE TEMP 2 TEMP 17
	MOVE TEMP 21 0
	RETURN TEMP 21
END

BBS_Sort [1]
BEGIN
	MOVE TEMP 10 MINUS 
	BEGIN
		HLOAD TEMP 11 TEMP 0 8
		RETURN TEMP 11
	END 1

	MOVE TEMP 9 TEMP 10
	MOVE TEMP 12 MINUS 0 1

	MOVE TEMP 7 TEMP 12
L0
	CJUMP LT TEMP 7 TEMP 9 L1
	MOVE TEMP 13 1
	MOVE TEMP 8 TEMP 13
L2
	CJUMP LT TEMP 8 
	BEGIN
		MOVE TEMP 14 PLUS TEMP 9 1
		RETURN TEMP 14
	END L3
	MOVE TEMP 15 MINUS TEMP 8 1

	MOVE TEMP 3 TEMP 15
	MOVE TEMP 16 
	BEGIN
		MOVE TEMP 17 
		BEGIN
			HLOAD TEMP 18 TEMP 0 4
			RETURN TEMP 18
		END
		MOVE TEMP 19 PLUS 1 TEMP 3
		MOVE TEMP 20 TIMES 4 TEMP 19
		MOVE TEMP 21 PLUS TEMP 17 TEMP 20
		HLOAD TEMP 22 TEMP 21 0
		RETURN TEMP 22
	END

	MOVE TEMP 6 TEMP 16
	MOVE TEMP 23 
	BEGIN
		MOVE TEMP 24 
		BEGIN
			HLOAD TEMP 25 TEMP 0 4
			RETURN TEMP 25
		END
		MOVE TEMP 26 PLUS 1 TEMP 8
		MOVE TEMP 27 TIMES 4 TEMP 26
		MOVE TEMP 28 PLUS TEMP 24 TEMP 27
		HLOAD TEMP 29 TEMP 28 0
		RETURN TEMP 29
	END

	MOVE TEMP 5 TEMP 23
	CJUMP LT TEMP 5 TEMP 6 L4
	MOVE TEMP 30 MINUS TEMP 8 1

	MOVE TEMP 4 TEMP 30
	MOVE TEMP 31 
	BEGIN
		MOVE TEMP 32 
		BEGIN
			HLOAD TEMP 33 TEMP 0 4
			RETURN TEMP 33
		END
		MOVE TEMP 34 PLUS 1 TEMP 4
		MOVE TEMP 35 TIMES 4 TEMP 34
		MOVE TEMP 36 PLUS TEMP 32 TEMP 35
		HLOAD TEMP 37 TEMP 36 0
		RETURN TEMP 37
	END

	MOVE TEMP 2 TEMP 31
	MOVE TEMP 38 PLUS 1 TEMP 4
	MOVE TEMP 39 
	BEGIN
		MOVE TEMP 40 
		BEGIN
			HLOAD TEMP 41 TEMP 0 4
			RETURN TEMP 41
		END
		MOVE TEMP 42 PLUS 1 TEMP 8
		MOVE TEMP 43 TIMES 4 TEMP 42
		MOVE TEMP 44 PLUS TEMP 40 TEMP 43
		HLOAD TEMP 45 TEMP 44 0
		RETURN TEMP 45
	END

	MOVE TEMP 46 TIMES 4 TEMP 38
	HLOAD TEMP 47 TEMP 0 4
	MOVE TEMP 48 PLUS TEMP 47 TEMP 46
	HSTORE TEMP 48 0 TEMP 39
	HSTORE TEMP 0 4 TEMP 47
	MOVE TEMP 49 PLUS 1 TEMP 8
	MOVE TEMP 50 TEMP 2
	MOVE TEMP 51 TIMES 4 TEMP 49
	HLOAD TEMP 52 TEMP 0 4
	MOVE TEMP 53 PLUS TEMP 52 TEMP 51
	HSTORE TEMP 53 0 TEMP 50
	HSTORE TEMP 0 4 TEMP 52
	JUMP L5
L4
	NOOP
	MOVE TEMP 54 0
	MOVE TEMP 1 TEMP 54
L5
	NOOP
	MOVE TEMP 55 PLUS TEMP 8 1
	MOVE TEMP 8 TEMP 55
	JUMP L2

L3
	NOOP
	MOVE TEMP 56 MINUS TEMP 9 1

	MOVE TEMP 9 TEMP 56
	JUMP L0

L1
	NOOP
	MOVE TEMP 57 0
	RETURN TEMP 57
END

BBS_Print [1]
BEGIN
	MOVE TEMP 2 0
	MOVE TEMP 1 TEMP 2
L6
	CJUMP LT TEMP 1 
	BEGIN
		MOVE TEMP 3 
		BEGIN
			HLOAD TEMP 4 TEMP 0 8
			RETURN TEMP 4
		END
		RETURN TEMP 3
	END L7
	MOVE TEMP 5 
	BEGIN
		MOVE TEMP 6 
		BEGIN
			HLOAD TEMP 7 TEMP 0 4
			RETURN TEMP 7
		END
		MOVE TEMP 8 PLUS 1 TEMP 1
		MOVE TEMP 9 TIMES 4 TEMP 8
		MOVE TEMP 10 PLUS TEMP 6 TEMP 9
		HLOAD TEMP 11 TEMP 10 0
		RETURN TEMP 11
	END

	PRINT TEMP 5
	MOVE TEMP 12 PLUS TEMP 1 1
	MOVE TEMP 1 TEMP 12
	JUMP L6

L7
	NOOP
	MOVE TEMP 13 0
	RETURN TEMP 13
END

BBS_Init [2]
BEGIN
	MOVE TEMP 2 TEMP 1
	HSTORE TEMP 0 8 TEMP 2
	MOVE TEMP 3 
	BEGIN
		MOVE TEMP 4 TEMP 1
		MOVE TEMP 5 HALLOCATE TIMES 4 PLUS 1 TEMP 4
		HSTORE TEMP 5 0 TEMP 4
		MOVE TEMP 6 0
L8
		CJUMP LT TEMP 6 TEMP 4 L9
		MOVE TEMP 7 PLUS 1 TEMP 6
		MOVE TEMP 8 TIMES 4 TEMP 7
		MOVE TEMP 9 PLUS TEMP 5 TEMP 8
		HSTORE TEMP 9 0 0
		MOVE TEMP 6 PLUS TEMP 6 1
		JUMP L8
L9
		NOOP
		RETURN TEMP 5
	END
	HSTORE TEMP 0 4 TEMP 3
	MOVE TEMP 10 PLUS 1 0
	MOVE TEMP 11 20
	MOVE TEMP 12 TIMES 4 TEMP 10
	HLOAD TEMP 13 TEMP 0 4
	MOVE TEMP 14 PLUS TEMP 13 TEMP 12
	HSTORE TEMP 14 0 TEMP 11
	HSTORE TEMP 0 4 TEMP 13
	MOVE TEMP 15 PLUS 1 1
	MOVE TEMP 16 7
	MOVE TEMP 17 TIMES 4 TEMP 15
	HLOAD TEMP 18 TEMP 0 4
	MOVE TEMP 19 PLUS TEMP 18 TEMP 17
	HSTORE TEMP 19 0 TEMP 16
	HSTORE TEMP 0 4 TEMP 18
	MOVE TEMP 20 PLUS 1 2
	MOVE TEMP 21 12
	MOVE TEMP 22 TIMES 4 TEMP 20
	HLOAD TEMP 23 TEMP 0 4
	MOVE TEMP 24 PLUS TEMP 23 TEMP 22
	HSTORE TEMP 24 0 TEMP 21
	HSTORE TEMP 0 4 TEMP 23
	MOVE TEMP 25 PLUS 1 3
	MOVE TEMP 26 18
	MOVE TEMP 27 TIMES 4 TEMP 25
	HLOAD TEMP 28 TEMP 0 4
	MOVE TEMP 29 PLUS TEMP 28 TEMP 27
	HSTORE TEMP 29 0 TEMP 26
	HSTORE TEMP 0 4 TEMP 28
	MOVE TEMP 30 PLUS 1 4
	MOVE TEMP 31 2
	MOVE TEMP 32 TIMES 4 TEMP 30
	HLOAD TEMP 33 TEMP 0 4
	MOVE TEMP 34 PLUS TEMP 33 TEMP 32
	HSTORE TEMP 34 0 TEMP 31
	HSTORE TEMP 0 4 TEMP 33
	MOVE TEMP 35 PLUS 1 5
	MOVE TEMP 36 11
	MOVE TEMP 37 TIMES 4 TEMP 35
	HLOAD TEMP 38 TEMP 0 4
	MOVE TEMP 39 PLUS TEMP 38 TEMP 37
	HSTORE TEMP 39 0 TEMP 36
	HSTORE TEMP 0 4 TEMP 38
	MOVE TEMP 40 PLUS 1 6
	MOVE TEMP 41 6
	MOVE TEMP 42 TIMES 4 TEMP 40
	HLOAD TEMP 43 TEMP 0 4
	MOVE TEMP 44 PLUS TEMP 43 TEMP 42
	HSTORE TEMP 44 0 TEMP 41
	HSTORE TEMP 0 4 TEMP 43
	MOVE TEMP 45 PLUS 1 7
	MOVE TEMP 46 9
	MOVE TEMP 47 TIMES 4 TEMP 45
	HLOAD TEMP 48 TEMP 0 4
	MOVE TEMP 49 PLUS TEMP 48 TEMP 47
	HSTORE TEMP 49 0 TEMP 46
	HSTORE TEMP 0 4 TEMP 48
	MOVE TEMP 50 PLUS 1 8
	MOVE TEMP 51 19
	MOVE TEMP 52 TIMES 4 TEMP 50
	HLOAD TEMP 53 TEMP 0 4
	MOVE TEMP 54 PLUS TEMP 53 TEMP 52
	HSTORE TEMP 54 0 TEMP 51
	HSTORE TEMP 0 4 TEMP 53
	MOVE TEMP 55 PLUS 1 9
	MOVE TEMP 56 5
	MOVE TEMP 57 TIMES 4 TEMP 55
	HLOAD TEMP 58 TEMP 0 4
	MOVE TEMP 59 PLUS TEMP 58 TEMP 57
	HSTORE TEMP 59 0 TEMP 56
	HSTORE TEMP 0 4 TEMP 58
	MOVE TEMP 60 0
	RETURN TEMP 60
END

